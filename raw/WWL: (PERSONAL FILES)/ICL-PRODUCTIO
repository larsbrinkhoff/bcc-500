.GL}"SEP-AR-ATE-LY PACK-AGES IN-STRUC-TIONS HOW-EVER
.CE
^UASSEMBLY OF THE INITIAL CORE LOAD^L
.SP 3
}'/THE OPERATING SYSTEM SOFTWARE IS INITIALIZED BEGINNING WITH
AN INITIAL CORE LOAD (^CICL).
/THIS DOCUMENT DESCRIBES THE STEPS NECESSARY FOR THE PRODUCTION OF THE
^CICL.
/WE ASSUME THE EXISTENCE OF A NUMBER OF SOURCE FILES HAVING
MORE OR LESS OBVIOUS NAMES.
/IT IS NOT PROPER TO USE THEIR EXACT NAMES OR MENTION THEIR WHEREABOUTS IN THIS
DOCUMENT, HOWEVER, AS EXPERIENCE HAS SHOWN THAT THEY CHANGE NAMES
AND LOCATIONS TOO OFTEN TO INCORPORATE PERMANENTLY INTO INSTRUCTIONS SUCH AS THESE.
}'/THE ACTUAL ^CICL IS PRODUCED WITH A SIMPLE 940 PROGRAM
CALLED "^CMAKE-ICL".}"/THIS PROGRAM EXISTS ONLY IN SOURCE, SO IT MUST
BE ASSEMBLED WITH ^CNARP AND LOADED WITH ^CDDT BEFORE IT CAN BE
RUN.
/EXPERIENCE HAS SHOWN THAT IT IS A GOOD IDEA TO LIST OUT THE
SOURCE BEFORE ASSEMBLING IT TO SEE IF THE SOURCE IS COMPATIBLE WITH THAT SOFTWARE
BEING PLACED INTO THE ^CICL.}"/USUALLY CHANGES IN THE SOFTWARE
DICTATE RELOCATING SOME PAGES OR CHANGING THE NUMBER OF PAGES
BEING COPIED FROM VARIOUS FILES.
/THE FOLLOWING SHOWS HOW THIS PROGRAM BEHAVES WHEN IT IS RUN:
.SP
.RM 10
^U@DDT
.SP
;T}#BMAKE-ICL.

IDENT.}#02X}#622
.SP
START;G
.SP
RUNNING TABLE: RT.

CONTEXT BLOCK: CB.

MIB: MIB.

MONITOR: MONITOR.

LISTENER: LISTENER.

APU CODE: APU.

NEW ICL FILE: "NEW-ICL".
.SP
DONE.

%F^L
.SP
.EM 10
}'/THE VARIOUS FILES NAMED IN THE PRECEDING TRANSACTION WHICH ARE THE CONSTITUENTS OF THE ^CICL ARE
THEMSELVES MADE IN DIFFERENT WAYS.}"/WE CONSIDER FIRST THE ^CMONITOR FILES.
/THE ^CMONITOR IS COMPILED WITH A SPECIAL VERSION OF ^CSPL CALLED
HERE "^CMSPL".}"/THE ^CMONITOR SOURCE EXISTS IN 9 SEPARATE PACKAGES
WHICH ARE READ IN AND COMPILED INTO A DUMP FILE.}"/THE DUMP FILE
IS THEN SEPARATED INTO SEVERAL OF THE ^CICL-^ECONSTITUENT FILES BY MEANS
OF ^CBXFER, WHICH EXISTS AS A ^CQSPL BINARY FILE AND MUST BE LOADED
AND RUN BY ^CQRUN.
.SP
.RM 10
^U@MSPL
.SP
SPL VERSION 1.1}"(7^/5^/73)
.SP
:.B 610000B

610 MS 16 PAGE FAULTS

:.S E 8

0 MS 0 PAGE FAULTS

:R COMN

1569 LINES = 0 WORDS

:R SPCL

247 LINES = 0 WORDS

:R TRAP

158 LINES = 0 WORDS

:R PMS

1309 LINES = 0 WORDS

:R IWS

649 LINES = 0 WORDS

:R FLS

1433 LINES = 0 WORDS

:R CHIO

247 LINES = 0 WORDS

:R SPS

747 LINES = 0 WORDS

:R STRT

330 LINES = 0 WORDS

:.C

943100 MS 11001 PAGE FAULTS

:.P

150584-18224=132360 WORDS

19701 MS 497 PAGE FAULTS

:.D "DMONITOR"

84 PAGES

10985 MS 93 PAGE FAULTS

:.L M

MONITOR RING

.NOFILL
}#WGS 10 OF 600160-602777}#RSGS 3010 OF 604000-607777
}#CS 610000-652331
250 MS 1 PAGE FAULTS
:.F
@QRUN

;T}#BXFER.
IDENT.}#06X}#1713

.EM 1
 .GET;G
.RM 1

DUMP FILE: DMONITOR.
DATA FILE: "CB".

VIRTUAL ADDRESS: 600000B
NUMBER OF PAGES: 1.

OK

.EM 1
 .GET;G
.RM 1

DUMP FILE: DMONITOR.
DATA FILE: "MONITOR".

VIRTUAL ADDRESS: 604000B
NUMBER OF PAGES: 10.

OK

.EM 1
 .GET;G
.RM 1

DUMP FILE: DMONITOR.
DATA FILE: "MIB".

VIRTUAL ADDRESS: 710000B
NUMBER OF PAGES: 1.

OK

%F^L
.FILL
.EM 10
}'/IT IS NECESSARY TO RECOMPILE PART OF THE ^CMONITOR
WITH OLD ^CSPL SO THAT THE RESIDENT TABLES CAN BE INITIALIZED BY
RUNNING THE FUNCTION ^CINIT'CHT.
/OLD ^CSPL IS A 940 DUMP FILE.}"/BEFORE IT CAN BE ^CRECOVER^EED, IT
IS NECESSARY TO LINK ^CDDT:^CPCMD TO #2:^CEMULATOR:^CPIF AND 
^CDDT:^C9SUB TO #2:^CDDT:^C9SUB.
/THEN:
.SP
.NOFILL
.RM 10
^U@RECOVER OLD-SPL JACK

40;B
BRS 146D;U
$
M1MODE/}$1}#0
%!
.EM 1
 .SPL;G

 SPL 8-27.50

 :.A 2
 250 MS
 :.B 610000B
 2616 MS
 :R COMN
 1591 LINES = 18608 WORDS
 :R SPCL
 247 LINES = 1884 WORDS
 :R STRT
 323 LINES = 3084 WORDS
 :.C

 CHTD COMPILING
 0 ERRORS 6R0W2836M 0 WGS 13 RSGS
 .
 .
 .
 :- INIT'CHT()
 COMPILE 1-GO

 EXIT TASK 1
 -:.D "XMON"
 37 PAGES
 6266 MS
 :.F

 %F

 @QRUN

 ;T BXFER.
 IDENT.}#06X}#1713

 .GET;G

 DUMP FILE: XMON.
 DATA FILE: "RT".

 VIRTUAL ADDRESS: 664000B
 NUMBER OF PAGES: 1.

 OK

 %F^L
.FILL
.SP
.EM 9
/THIS COMPLETES THE ^CMONITOR^E-RELATED FILES.
}'/THE ^CLISTENER IS MADE USING YET ANOTHER VERSION OF ^CSPL
FOR COMPILING CODE IN THE /UTILITY RING.}"/THIS VERSION IS
CALLED HERE "^CUSPL".
/THE FOLLOWING SHOWS HOW IT IS DONE:
.SP
.RM 10
.NOFILL
^U@USPL

SPL VERSION 1.1 (7^/5^/73)

:.B 435000B
610 MS 16 PAGE FAULTS
:.S E 5
0 MS 0 PAGE FAULTS
:.Z S
0 MS 0 PAGE FAULTS
:.R LISTENER
1815 LINES = 0 WORDS
:.C
91459 MS 1117 PAGE FAULTS
:.P
43386-8177=35209 WORDS
5290 MS 131 PAGE FAULTS
:.D "DLISTENER"
28 PAGES
3652 MS 34 PAGE FAULTS
:.L M
UTILITY RING
}#WGS 1726 OF 403200-406777}#RSGS 711 OF 434000-434777
}#CS 435000-446034
0 MS 1 PAGE FAULTS
:-O/$403012B
2435520B
-:.F
@QRUN

;T}#BXFER.
IDENT.}#06X}#1713

.EM 1
 .GET;G

 DUMP FILE: DLISTENER.
 DATA FILE: "LISTENER".

 VIRTUAL ADDRESS: 434000B
 NUMBER OF PAGES: 3.

 OK

 %F^L
.FILL
.EM 9
}'/IT IS NECESSARY TO MODIFY THE SUB-PROCESS ENTRY-POINT
CONTENTS OF THE ^CCB FILE MADE PREVIOUSLY TO BE COMPATIBLE WITH THE
^CLISTENER JUST COMPILED.}"/THAT IS WHY THE CONTENTS OF 403012/B
WAS JUST EXAMINED.}"/THIS IS DONE AS FOLLOWS:
.SP
.NOFILL
.RM 10
^U@DDT

CLEAR;U
$
BRS 15D;U
CB.$$
10^\}#3
4000;A
;A;X
BIO 10;U
$$
BRS 17D;U
$
7012B[}#2435620}#2435520
CLEAR;U
$
BRS 16D;U
CB.$$
4000;A
;A;X
BIO 10;U
$$
BRS 17D;U
$
%F^L
.FILL
.SP
.EM 10
}'/FINALLY, IT IS NECESSARY TO MAKE THE ^CAPU CODE FILE.
/A SPECIAL VERSION OF ^CNARP CALLED ^CAPUAS IS USED TO ASSEMBLE
THE SOURCE LANGUAGE.}"^CAPUAS IS A 940 DUMP FILE.}"/THE SOURCE FILE
ACTUALLY CONTAINS TWO PROGRAM PACKAGES WHICH MUST BE SEPARATELY
ASSEMBLED.}"/THE FOLLOWING SCRIPT SHOWS THE ENTIRE PRODUCTION PROCESS:
.SP
.RM 10
.NOFILL
^U@QED

*READ FROM AMC04.
18766 WORDS.
*1,:UMCCD:-1WRITE ON "AMCCD".
11147 WORDS.
*:UMCCD:,$WRITE ON "UMCCD".
7620 WORDS.
*FINISHED.

@REC APUAS

SOURCE FILE:}"AMCCD.
OBJECT FILE:}""B1".

AMCCD}#IDENT
AMCCD COMPILING
HALF WAY


50 SEC}$0 ERR}$2457 (1327) WRD}#(S:670,O:0,L:62,M:1977,U:0)


@CONT
#2:NARP

SOURCE FILE:}"UMCCD.
OBJECT FILE:}""B2".

UMCCD}#IDENT


29 SEC}$0 ERR}$2513 (1355) WRD}#(S:697,O:0,L:54,M:1977,U:35)


@DDT

0;T}#B1.
IDENT.}#MACCD}#2457

;T}#B2.
IDENT.}#UMCCD}#5172

;U

%R}#23250000}#0
2325,0;R
240;F
CLEAR;U
$
BRS 16D;U
"APU:9BIN".$$
10^\}#3
10000;A
;A;X
BIO 10;U
$$
BRS 17D;U
$
%F^L
.FILL
.SP
.EM 10